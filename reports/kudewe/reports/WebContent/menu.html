<html>
<head>
  <title>Kudewe Reports</title>
    <!-- ** CSS ** -->
    <!-- base library -->
    <link rel="stylesheet" type="text/css" href="lib/ext-3.0.0/resources/css/ext-all.css" />
	<link rel="stylesheet" type="text/css" href="css/feed-viewer.css" />
	
	<style>
		#homeTab {
			padding: 20px;
			font-family: tahoma,arial,helvetica,sans-serif;
			font-size: 12px;
		}
		h1 {
			font-size: 14px;
		}
		#logo {
			float: left;
		}
		#messagePanel {
			margin-left: 200px;
		}
	</style>
	
    <!-- ** Javascript ** -->
    <!-- ExtJS library: base/adapter -->
 	<script type="text/javascript" src="lib/ext-3.0.0/adapter/ext/ext-base.js"></script>
	
 	<!-- ExtJS library: all widgets -->
    <script type="text/javascript" src="lib/ext-3.0.0/ext-all.js"></script>
	
	<!-- libs -->
	<script type="text/javascript" src="lib/tibco/pagebus.js"></script>
	<script type="text/javascript" src="lib/ui/buildMenu.js"></script>
	<script type="text/javascript" src="lib/ui/feedGrid.js"></script>
	
	<script type="text/javascript">
    Ext.onReady(function(){
        
        // NOTE: This is an example showing simple state management. During development,
        // it is generally best to disable state management as dynamically-generated ids
        // can change across page loads, leading to unpredictable results.  The developer
        // should ensure that stable state ids are set for stateful components in real apps.
        Ext.state.Manager.setProvider(new Ext.state.CookieProvider());

		// Get dash board definition and build it
		Ext.Ajax.request({
			url: 'metadata/menu.json' , 
			params: {},
			method: 'GET',
			success: function (result, request) { 
				var menuDefinition = Ext.util.JSON.decode(result.responseText);
	
				var tabPanel = new Ext.TabPanel({
		            region: 'center', // a center region is ALWAYS required for border layout
		            deferredRender: false,
		            activeTab: 0,     // first tab initially active
		            items: [{
		                contentEl: 'homeTab',
		                title: 'Bienvenido',
		                closable: false,
		                autoScroll: true
		            }]
		        });

				var menu = buildMenu(menuDefinition, tabPanel);
		    	
		        var viewport = new Ext.Viewport({
		            layout: 'border',
		            items: [{
		                region: 'north',
		                height: 32,
		                layout: 'fit', // specify layout manager for items
		                items: [
							menu
		        		]
		            }, tabPanel]
		        });
				
			},
			failure: function ( result, request) { 
				Ext.MessageBox.alert('Failed', result.responseText); 
			} 
		});

    });

    Ext.onReady(function(){
        Ext.QuickTips.init();

        var feedGridRse = new FeedGridRse (
            {
	        	height: 200,
	            width: 600,
	            stripeRows: true
	        }
        );
        feedGridRse.render('feedGridRse');
        feedGridRse.loadFeed('feed/rse.xml');
		
        var feedGridTwitter = new FeedGridTwitter(
                {
    	        	height: 100,
    	            width: 600,
    	            stripeRows: true
    	        }
            );
        feedGridTwitter.render('feedGridTwitter');
        feedGridTwitter.loadFeed('feed/twitter.xml');
            
    });
	</script>
</head>
<body>
    <div id="homeTab" class="x-hide-display">
       	<div id="logo">
	 		<a href="http://www.kudewe.com" target="_blank"><img src="img/logo.gif"></a>
	 	</div>
  		<div id="messagePanel">
	  		<h1>Bienvenido a Kudewe Reports</h1>
  			<p>Punto panor&aacute;mico de su organizaci&oacute;n</p>
  			<p><a href="http://www.kudewe.com" target="_blank">http://www.kudewe.com</a></p>
  			<p>&nbsp;</p>
  			
  			<h1>Novedades via twitter (<a href="http://www.twitter.com/kudewe" target="_blank">@kudewe</a>)</h1>
  			<div id="feedGridTwitter"></div>
  			<p>&nbsp;</p>
  			
	    	<h1>#RSE en <a href="http://blog.kudewe.com/search/label/rse" target="_blank">blog.kudewe.com</a></h1>
  			<p>Peque&ntilde;as acciones con impacto <a href="http://blog.kudewe.com/search/label/impacto%20ambiental" target="_blank">ambiental</a> y <a href="http://blog.kudewe.com/search/label/impacto%20social" target="_blank">social</a></p>
  			<div id="feedGridRse"></div>
  			<p>&nbsp;</p>
  			
	    </div>
		<div><p>Estamos para ayudarlo a gestionar mejor su organizaci&oacute;n, ante cualquier duda o consulta, lo inviamos a escribirnos a <a href="mailto:reports@kudewe.com">reports@kudewe.com</a></p></div>
    </div>
    
</body>
</html>
